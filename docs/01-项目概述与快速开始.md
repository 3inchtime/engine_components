# é¡¹ç›®æ¦‚è¿°ä¸å¿«é€Ÿå¼€å§‹

> @thatopen/components æ˜¯ä¸€ä¸ªåŸºäº Three.js çš„ç°ä»£åŒ– BIM å·¥å…·åº“ï¼Œä¸“ä¸ºæ„å»ºé«˜æ€§èƒ½çš„ 3D BIM åº”ç”¨ç¨‹åºè€Œè®¾è®¡ã€‚

## ğŸš€ é¡¹ç›®ç®€ä»‹

### ä»€ä¹ˆæ˜¯ @thatopen/componentsï¼Ÿ

@thatopen/components æ˜¯ä¸€ä¸ªå¼€æºçš„ BIMï¼ˆå»ºç­‘ä¿¡æ¯æ¨¡å‹ï¼‰ç»„ä»¶åº“ï¼Œå®ƒåŸºäº Three.js æ„å»ºï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·æ¥åˆ›å»ºä¸“ä¸šçº§çš„ 3D BIM åº”ç”¨ç¨‹åºã€‚è¯¥åº“é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒ IFC æ–‡ä»¶å¤„ç†ã€3D æ¸²æŸ“ã€æµ‹é‡å·¥å…·ã€åä½œåŠŸèƒ½ç­‰æ ¸å¿ƒ BIM åŠŸèƒ½ã€‚

### æ ¸å¿ƒä¼˜åŠ¿

- **ğŸ—ï¸ ä¸“ä¸šçº§ BIM åŠŸèƒ½**: å®Œæ•´çš„ IFC æ–‡ä»¶æ”¯æŒã€å±æ€§ç®¡ç†ã€å…³ç³»ç´¢å¼•
- **âš¡ é«˜æ€§èƒ½æ¸²æŸ“**: åŸºäº Three.js çš„ä¼˜åŒ–æ¸²æŸ“ç®¡çº¿ï¼Œæ”¯æŒå¤§å‹æ¨¡å‹
- **ğŸ§© æ¨¡å—åŒ–æ¶æ„**: å¯æ‰©å±•çš„ç»„ä»¶ç³»ç»Ÿï¼ŒæŒ‰éœ€ä½¿ç”¨åŠŸèƒ½æ¨¡å—
- **ğŸ“± è·¨å¹³å°æ”¯æŒ**: åŒæ—¶æ”¯æŒæµè§ˆå™¨å’Œ Node.js ç¯å¢ƒ
- **ğŸ”§ TypeScript åŸç”Ÿ**: å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ™ºèƒ½æç¤º
- **ğŸ¤ å¼€æºåä½œ**: MIT è®¸å¯è¯ï¼Œæ´»è·ƒçš„ç¤¾åŒºæ”¯æŒ

## ğŸ¯ é€‚ç”¨åœºæ™¯

### å»ºç­‘è®¾è®¡ä¸æ–½å·¥
- BIM æ¨¡å‹æŸ¥çœ‹å™¨
- å»ºç­‘è®¾è®¡å®¡æŸ¥å·¥å…·
- æ–½å·¥è¿›åº¦ç®¡ç†
- è´¨é‡æ£€æŸ¥ç³»ç»Ÿ

### è®¾æ–½ç®¡ç†
- å»ºç­‘è¿ç»´å¹³å°
- ç©ºé—´ç®¡ç†ç³»ç»Ÿ
- è®¾å¤‡ç»´æŠ¤ç®¡ç†
- èƒ½è€—åˆ†æå·¥å…·

### æ•™è‚²ä¸åŸ¹è®­
- BIM æ•™å­¦å¹³å°
- å»ºç­‘å¯è§†åŒ–æ¼”ç¤º
- è™šæ‹Ÿç°å®åŸ¹è®­
- æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```
@thatopen/components æŠ€æœ¯æ ˆ
â”œâ”€â”€ Three.js (3D æ¸²æŸ“å¼•æ“)
â”œâ”€â”€ web-ifc (IFC æ–‡ä»¶è§£æ)
â”œâ”€â”€ TypeScript (ç±»å‹å®‰å…¨)
â””â”€â”€ ç°ä»£ Web æ ‡å‡† (ES2020+)
```

### åŒ…ç»“æ„

```
@thatopen/components
â”œâ”€â”€ @thatopen/components        # æ ¸å¿ƒåŒ… (è·¨å¹³å°)
â”‚   â”œâ”€â”€ ç»„ä»¶ç®¡ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ IFC æ–‡ä»¶å¤„ç†
â”‚   â”œâ”€â”€ å‡ ä½•ä½“ç®¡ç†
â”‚   â””â”€â”€ æµ‹é‡å·¥å…·åŸºç¡€
â””â”€â”€ @thatopen/components-front  # å‰ç«¯åŒ… (æµè§ˆå™¨ä¸“ç”¨)
    â”œâ”€â”€ äº¤äº’å¼ç»„ä»¶
    â”œâ”€â”€ å¯è§†åŒ–æ•ˆæœ
    â”œâ”€â”€ ç”¨æˆ·ç•Œé¢
    â””â”€â”€ é«˜çº§æµ‹é‡å·¥å…·
```

## ğŸ“¦ å¿«é€Ÿå®‰è£…

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 16.0.0
- **ç°ä»£æµè§ˆå™¨**: æ”¯æŒ ES2020 å’Œ WebGL 2.0
- **TypeScript**: >= 4.5.0 (æ¨è)

### å®‰è£…å‘½ä»¤

```bash
# ä½¿ç”¨ npm
npm install @thatopen/components @thatopen/components-front three @types/three web-ifc

# ä½¿ç”¨ yarn
yarn add @thatopen/components @thatopen/components-front three @types/three web-ifc

# ä½¿ç”¨ pnpm
pnpm add @thatopen/components @thatopen/components-front three @types/three web-ifc
```

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºåŸºç¡€ HTML é¡µé¢

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ç¬¬ä¸€ä¸ª BIM åº”ç”¨</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; }
        #container { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="container"></div>
    <script type="module" src="./main.js"></script>
</body>
</html>
```

### 2. åˆ›å»ºåŸºç¡€ 3D åœºæ™¯

```typescript
// main.ts
import * as THREE from "three";
import * as OBC from "@thatopen/components";

// è·å–å®¹å™¨
const container = document.getElementById("container")!;

// åˆ›å»ºç»„ä»¶ç³»ç»Ÿ
const components = new OBC.Components();

// åˆ›å»ºä¸–ç•Œ
const worlds = components.get(OBC.Worlds);
const world = worlds.create<
  OBC.SimpleScene,
  OBC.SimpleCamera,
  OBC.SimpleRenderer
>();

// é…ç½®åœºæ™¯
world.scene = new OBC.SimpleScene(components);
world.scene.setup();

// é…ç½®æ¸²æŸ“å™¨
world.renderer = new OBC.SimpleRenderer(components, container);

// é…ç½®ç›¸æœº
world.camera = new OBC.SimpleCamera(components);
world.camera.controls.setLookAt(10, 10, 10, 0, 0, 0);

// åˆå§‹åŒ–
components.init();

// æ·»åŠ ä¸€ä¸ªç®€å•çš„ç«‹æ–¹ä½“
const geometry = new THREE.BoxGeometry();
const material = new THREE.MeshLambertMaterial({ color: 0x6528D7 });
const cube = new THREE.Mesh(geometry, material);
world.scene.three.add(cube);

// æ·»åŠ å…‰ç…§
const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(10, 10, 5);
world.scene.three.add(ambientLight, directionalLight);

console.log("ğŸ‰ BIM åº”ç”¨åˆ›å»ºæˆåŠŸï¼");
```

### 3. æ·»åŠ  IFC æ–‡ä»¶åŠ è½½åŠŸèƒ½

```typescript
// æ·»åŠ åˆ° main.ts
import * as OBC from "@thatopen/components";

// è·å– IFC åŠ è½½å™¨
const ifcLoader = components.get(OBC.IfcLoader);

// é…ç½®åŠ è½½å™¨
await ifcLoader.setup({
  autoSetWasm: true,
  coordinate: true,
  optimize: true
});

// åˆ›å»ºæ–‡ä»¶è¾“å…¥
const fileInput = document.createElement('input');
fileInput.type = 'file';
fileInput.accept = '.ifc';
fileInput.style.position = 'absolute';
fileInput.style.top = '10px';
fileInput.style.left = '10px';
fileInput.style.zIndex = '1000';
document.body.appendChild(fileInput);

// å¤„ç†æ–‡ä»¶åŠ è½½
fileInput.addEventListener('change', async (event) => {
  const file = (event.target as HTMLInputElement).files?.[0];
  if (file) {
    const buffer = await file.arrayBuffer();
    const model = await ifcLoader.load(buffer);
    
    // æ·»åŠ æ¨¡å‹åˆ°åœºæ™¯
    world.scene.three.add(model);
    
    // è°ƒæ•´ç›¸æœºè§†è§’
    world.camera.controls.fitToSphere(model, true);
    
    console.log(`âœ… IFC æ¨¡å‹åŠ è½½å®Œæˆ: ${model.name}`);
  }
});
```

## ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ 

### æ¨èå­¦ä¹ è·¯å¾„

1. **[æ ¸å¿ƒç»„ä»¶è¯¦è§£](./02-æ ¸å¿ƒç»„ä»¶è¯¦è§£.md)** - æ·±å…¥ç†è§£ç»„ä»¶ç³»ç»Ÿ
2. **[IFC æ–‡ä»¶å¤„ç†](./03-IFCæ–‡ä»¶å¤„ç†ç³»ç»Ÿ.md)** - æŒæ¡ BIM æ•°æ®å¤„ç†
3. **[æµ‹é‡å·¥å…·ç³»ç»Ÿ](./04-æµ‹é‡å·¥å…·ç³»ç»Ÿ.md)** - æ·»åŠ ä¸“ä¸šæµ‹é‡åŠŸèƒ½
4. **[å‰ç«¯ç»„ä»¶ç³»ç»Ÿ](./05-å‰ç«¯ç»„ä»¶ç³»ç»Ÿ.md)** - æ„å»ºä¸°å¯Œçš„ç”¨æˆ·ä½“éªŒ
5. **[å·¥å…·ç±»ä¸æœ€ä½³å®è·µ](./06-å·¥å…·ç±»ä¸æœ€ä½³å®è·µ.md)** - æ€§èƒ½ä¼˜åŒ–å’Œæ¶æ„è®¾è®¡

### å®è·µé¡¹ç›®å»ºè®®

- **åˆå­¦è€…**: åˆ›å»ºä¸€ä¸ªç®€å•çš„ IFC æ–‡ä»¶æŸ¥çœ‹å™¨
- **è¿›é˜¶è€…**: å¼€å‘å¸¦æµ‹é‡åŠŸèƒ½çš„ BIM å·¥å…·
- **é«˜çº§è€…**: æ„å»ºå®Œæ•´çš„ BIM åä½œå¹³å°

## ğŸŒŸ ç¤¾åŒºä¸æ”¯æŒ

- **å®˜æ–¹æ–‡æ¡£**: [https://docs.thatopen.com](https://docs.thatopen.com)
- **GitHub ä»“åº“**: [https://github.com/ThatOpen/engine_components](https://github.com/ThatOpen/engine_components)
- **åœ¨çº¿ç¤ºä¾‹**: [https://thatopen.github.io/engine_components/](https://thatopen.github.io/engine_components/)
- **ç¤¾åŒºè®¨è®º**: [GitHub Discussions](https://github.com/ThatOpen/engine_components/discussions)

---

> ğŸ¯ **æç¤º**: æœ¬æŒ‡å—æä¾›äº†å¿«é€Ÿå…¥é—¨çš„åŸºç¡€çŸ¥è¯†ã€‚è¦æ„å»ºç”Ÿäº§çº§åº”ç”¨ï¼Œè¯·ç»§ç»­å­¦ä¹ åç»­ç« èŠ‚çš„è¯¦ç»†å†…å®¹ã€‚
