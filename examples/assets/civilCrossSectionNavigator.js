import{C as M,L as b}from"./web-ifc-api-BiYij3qq.js";import{f as k,p as C,s as S,k as A,N as E,I as P}from"./index-B3b_h8A8.js";import{p as B}from"./index-DyM33b1I.js";import{Z as L}from"./index-yV6OCaJD.js";import{S as N}from"./stats.min-GTpOrGrX.js";import{C as x}from"./index-Ca45K5im.js";import{R as D}from"./renderer-with-2d-Dwkf_fcQ.js";import"./import-wrapper-prod-vMwJRSad.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./curve-highlighter-B2XYj340.js";import"./Line2-Bd8FUlMY.js";import"./index-Bq1KDtuM.js";import"./mark-B9TqPH3U.js";B.init();L.init();const w=document.getElementById("container"),t=new k,I=t.get(C),o=I.create();o.scene=new S(t);o.renderer=new D(t,w);o.camera=new A(t);t.init();o.scene.setup();o.camera.controls.setLookAt(5,5,5,0,0,0);w.appendChild(o.renderer.three2D.domElement);const U=t.get(E);U.create(o);const u=t.get(P),W=await fetch("../../../../../resources/road.frag"),j=await W.arrayBuffer(),H=new Uint8Array(j),i=u.load(H);o.scene.three.add(i);const R=await fetch("../../../../../resources/road.json");i.setLocalProperties(await R.json());const d=new x(t);d.draw(i);const s=new(void 0)(t),Z=s.uiElement.get("drawer");Z.visible=!0;const a=new(void 0)(t);a.draw(i);a.setup();a._highlighter.hoverCurve.material.color.set(1,1,1);const{material:g}=d.highlighter.hoverPoints;if(Array.isArray(g)){const e=g[0];"color"in e&&e.color.set(1,1,1)}else"color"in g&&g.color.set(1,1,1);d.onHighlight.add(({mesh:e})=>{s.clear(),s.draw(i,[e.curve.alignment]),s.highlighter.select(e),a._highlighter.select(e);const n=e.curve.index,r=e.curve.alignment.absolute[n];r.mesh.geometry.computeBoundingSphere(),cameraComponent.controls.fitToSphere(r.mesh.geometry.boundingSphere,!0)});const v=new(void 0)(t),_=v.uiElement.get("floatingWindow");_.visible=!0;d.onMarkerChange.add(({alignment:e,percentage:n,type:r,curve:m})=>{if(s.setMarker(e,n,r),a.setMarker(e,n,r),r==="select"){const c=m.alignment.absolute[m.index].mesh,f=e.getPointAt(n,"absolute");v.set(c,f)}});d.onMarkerHidden.add(({type:e})=>{s.hideMarker(e),a.hideMarker(e)});window.addEventListener("keydown",()=>{s.scene.scaleY+=.1});const h=new(void 0)(t);h.byEntity(i);const F=h.get(),y=t.tools.get(void 0),p=y.styles.get();for(const e in F.entities){const n=h.find({entities:[e]}),r=new M(Math.random(),Math.random(),Math.random()),m=new b({color:r});y.styles.create(e,new Set,m);for(const c in n){const f=u.list[c];f&&(p[e].fragments[c]=new Set(n[c]),p[e].meshes.add(f.mesh))}}const l=new N;l.showPanel(2);document.body.append(l.dom);l.dom.style.left="0px";o.renderer.onBeforeUpdate.add(()=>l.begin());o.renderer.onAfterUpdate.add(()=>l.end());
