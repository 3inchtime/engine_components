import{s as f,t as g,u as l}from"./web-ifc-api-Glg4rFxW.js";import{S as u}from"./stats.min-GTpOrGrX.js";import{g as F}from"./lil-gui.module.min-Bc0DeA9g.js";import{C as w}from"./index-BjtWM7Op.js";import{W as I,S as C}from"./index-BXYZy8Yd.js";import{G as E}from"./index-BOy52J82.js";import{F as O}from"./index-BHbmf4IB.js";import{F as R}from"./index-CSKQgp6F.js";import{S as N,a as y}from"./simple-camera-FtEnIFQL.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./ifc-metadata-reader-COLrjkt6.js";import"./ifc-fragment-settings-DLKS16yU.js";import"./ifc-geometry-types-C3SKrzrZ.js";const S=document.getElementById("container"),n=new w,x=n.get(I),o=x.create();o.scene=new N(n);o.renderer=new C(n,S);o.camera=new y(n);n.init();o.camera.controls.setLookAt(12,6,8,0,0,-10);o.scene.setup();const L=n.get(E);L.create(o);const r=n.get(O),a=n.get(R);await a.setup();const b=[f,g,l];for(const e of b)a.settings.excludedCategories.add(e);a.settings.webIfc.COORDINATE_TO_ORIGIN=!0;a.settings.webIfc.OPTIMIZE_PROFILES=!0;async function A(){const t=await(await fetch("../../../../../resources/02.ifc")).arrayBuffer(),m=new Uint8Array(t),i=await a.load(m);i.name="example",o.scene.three.add(i)}function p(e){const t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=e.name,document.body.appendChild(t),t.click(),t.remove()}async function h(){if(!r.groups.size)return;const e=Array.from(r.groups.values())[0],t=r.export(e);p(new File([new Blob([t])],"small.frag"));const m=e.getLocalProperties();m&&p(new File([JSON.stringify(m)],"small.json"))}function B(){r.dispose()}const s=new u;s.showPanel(2);document.body.append(s.dom);s.dom.style.left="0px";o.renderer.onBeforeUpdate.add(()=>s.begin());o.renderer.onAfterUpdate.add(()=>s.end());const d={loadFragments:()=>A(),exportFragments:()=>h(),disposeFragments:()=>B()},c=new F;c.add(d,"loadFragments").name("Import fragments");c.add(d,"exportFragments").name("Export fragments");c.add(d,"disposeFragments").name("Dispose fragments");r.onFragmentsLoaded.add(e=>{console.log(e)});
